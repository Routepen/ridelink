{"version":3,"sources":["passport.js"],"names":[],"mappings":"AAAA;;;AAGA,IAAI,aAAa,QAAQ,QAAR,CAAjB;AACA,IAAI,OAAO,QAAQ,gBAAR,CAAX;;AAEA,SAAS,GAAT,CAAa,IAAI,gBAAJ,CAAqB;AAC1B,cAAU,WAAW,YAAX,CAAwB,QADR;AAE1B,kBAAc,WAAW,YAAX,CAAwB,YAFZ;AAG1B,iBAAa,WAAW,YAAX,CAAwB,WAHX;AAI1B,mBAAe,WAAW,YAAX,CAAwB;AAJb,CAArB,EAMT,UAAS,WAAT,EAAsB,YAAtB,EAAoC,OAApC,EAA6C,EAA7C,EAAiD;AAC7C,YAAQ,QAAR,CAAiB,YAAU;AACvB,aAAK,YAAL,CAAkB,EAAE,YAAY,QAAQ,EAAtB,EAAlB,EAA8C,UAAU,GAAV,EAAe,IAAf,EAAqB;AAC/D,gBAAI,GAAJ,EACI,OAAO,KAAK,GAAL,CAAP;AACJ,gBAAI,IAAJ,EAAU;AACN,uBAAO,KAAK,IAAL,EAAW,IAAX,CAAP;AACH,aAFD,MAEO;AACH,oBAAI,UAAU,IAAI,IAAJ,EAAd;AACA,wBAAQ,QAAR,CAAiB,EAAjB,GAAsB,QAAQ,EAA9B;AACA,wBAAQ,QAAR,CAAiB,KAAjB,GAAyB,WAAzB;AACA,wBAAQ,QAAR,CAAiB,IAAjB,GAAwB,QAAQ,IAAR,CAAa,SAAb,GAAyB,GAAzB,GAA+B,QAAQ,IAAR,CAAa,UAApE;AACA,wBAAQ,QAAR,CAAiB,KAAjB,GAAyB,CAAC,QAAQ,MAAR,CAAe,CAAf,EAAkB,KAAlB,IAA2B,EAA5B,EAAgC,WAAhC,EAAzB;AACA,wBAAQ,QAAR,CAAiB,MAAjB,GAA0B,QAAQ,OAAlC;AACA,wBAAQ,QAAR,CAAiB,MAAjB,GAA0B,QAAQ,MAAlC;AACA,wBAAQ,QAAR,CAAiB,IAAjB,GAAwB,QAAQ,IAAhC;;AAEA,wBAAQ,IAAR,CAAa,UAAS,GAAT,EAAc;AACvB,wBAAI,GAAJ,EACI,MAAM,GAAN;AACJ,2BAAO,KAAK,IAAL,EAAW,OAAX,CAAP;AACH,iBAJD;AAKH;AACD,mBAAO,GAAG,GAAH,EAAQ,IAAR,CAAP;AACH,SAtBD;AAuBH,KAxBD;AAyBH,CAhCQ,CAAb","file":"passport-compiled.js","sourcesContent":["/**\r\n * Created by Victor on 2/27/2017.\r\n */\r\nvar configAuth = require('./auth');\r\nvar User = require('../models/User');\r\n\r\npassport.use(new FacebookStrategy({\r\n        clientID: configAuth.facebookAuth.clientID,\r\n        clientSecret: configAuth.facebookAuth.clientSecret,\r\n        callbackURL: configAuth.facebookAuth.callbackURL,\r\n        profileFields: configAuth.facebookAuth.profileFields\r\n    },\r\n    function(accessToken, refreshToken, profile, cb) {\r\n        process.nextTick(function(){\r\n            User.findOrCreate({ facebookId: profile.id }, function (err, user) {\r\n                if (err)\r\n                    return done(err);\r\n                if (user) {\r\n                    return done(null, user);\r\n                } else {\r\n                    var newUser = new User();\r\n                    newUser.facebook.id = profile.id;\r\n                    newUser.facebook.token = accessToken;\r\n                    newUser.facebook.name = profile.name.givenName + ' ' + profile.name.familyName;\r\n                    newUser.facebook.email = (profile.emails[0].value || '').toLowerCase();\r\n                    newUser.facebook.photos = profile.picture;\r\n                    newUser.facebook.gender = profile.gender;\r\n                    newUser.facebook.link = profile.link;\r\n\r\n                    newUser.save(function(err) {\r\n                        if (err)\r\n                            throw err;\r\n                        return done(null, newUser);\r\n                    });\r\n                }\r\n                return cb(err, user);\r\n            });\r\n        });\r\n    }\r\n));"]}